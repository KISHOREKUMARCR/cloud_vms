{% extends 'templates/main_base.html' %}
{% load static %}

{% block title %}Add Video File{% endblock %}
<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
<script src='https://code.jquery.com/jquery-3.2.1.min.js'></script>
<script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
{% block content %}

<div class="container-xxl flex-grow-1 container-p-y">
  <form class="browser-default-validation" id="VideoUpload" method="post" enctype="multipart/form-data">
    {% csrf_token %}
  <h4 class="py-3 breadcrumb-wrapper mb-4">
    <span class="text-muted fw-light">COS AI - Forms /</span> Traffic Video Uploader
  </h4>
  <div class="row">
    <div class="col-md-12">
      <div class="card mb-4">
        <h5 class="card-header">* Upload One Hour Video Only</h5>
        <div class="card-body">
<div class="row">
    <!-- Form controls -->
    <div class="col-md-3" hidden>      
          <div class="mb-3" >
            <label for="exampleFormControlInput1" class="form-label" >Select Company</label>
            <select class="form-select CompanyName" id="basic-default-company" name="CompanyName" required>
              <option value="4" data-icon="bx bxl-codepen">Technical Consultancy Services (TCS)                 
              </option>
                     
          </select>
          </div>
        </div>
        <div class="col-md-3" hidden>    
          <div class="mb-3">
            <label for="exampleFormControlReadOnlyInput1" class="form-label">Select Project</label>
            <select class="form-select ProjectName" id="basic-default-project" name="ProjectName" >  
              <option value="3" data-icon="bx bxl-codepen">Traffic Survey - Video Upload Mode                
              </option>            
            </select>
          </div>
        </div>
        <div class="col-md-3" hidden>  
          <div class="mb-3">
            <label for="exampleFormControlReadOnlyInputPlain1" class="form-label">Select Location</label>
            <select class="form-select  StationName" id="basic-default-location"  name="StationName" >
              <option value="4" data-icon="bx bxl-codepen">General - Video Upload Mode
              </option>  
            </select>
           
          </div>
        </div>
        <div class="col-md-3" hidden>  
          <div class="mb-3">
            <label for="exampleFormControlReadOnlyInputPlain1" class="form-label">Camera No/ID</label>
            <input
                          type="text"
                          class="form-control"
                          id="CameraNo"
                          name="CameraNo"
                          placeholder="Camera No/ID (Optional)"
                          aria-describedby="defaultFormControlHelp"
                          value="1"
            />
          </div>
        </div>           
    </div>
    <div class="row">
      <!-- Form controls -->
      <div class="col-md-3" hidden>      
            <div class="mb-3">
              <label for="exampleFormControlInput1" class="form-label">Select Camera Model</label>
              <select class="form-select CModel" id="basic-default-cModel" name="CModel">
                {% for cModel in all_cameraMod  %}
                  <option selected="" value="{{cModel.id}}" data-icon="bx bxl-codepen">{{cModel.name}}</option>
                {% endfor %}
            
              </select>
            </div>
          </div>
          <div class="col-md-3" hidden>    
            <div class="mb-3">
              <label for="exampleFormControlReadOnlyInput1" class="form-label">Camera Height</label>
              <input
                      type="text"
                      id="CHeight"
                      name="CHeight"
                      class="form-control"
                      placeholder=""
                      value="4.5"
                      required
                  />
            </div>
          </div>
          <div class="col-md-3" hidden>  
            <div class="mb-3">
              <label for="exampleFormControlReadOnlyInputPlain1" class="form-label">Camera View</label>
              <input
                    type="text"
                    id="CView"
                    name="CView"
                    class="form-control"
                    placeholder=""
                    value="side"
                    required
              />
            </div>
          </div>
          <div class="col-md-3">  
            <div class="mb-3">
              <label for="exampleFormControlReadOnlyInputPlain1" class="form-label">Start Time (HH:MM)</label>
              <input
              type="text"
              id="VideoStartTime"
              name="VideoStartTime"
              class="form-control"
              placeholder=""
              required
          />
            </div>
          </div>  
          <div class="col-md-3">      
            <div class="mb-3">
              <label for="exampleFormControlInput1" class="form-label">End Time (HH:MM)</label>
              <input
                        type="text"
                        id="VideoEndTime"
                        name="VideoEndTime"
                        class="form-control"
                        placeholder=""
                        required
                    />
            </div>
          </div> 
          <div class="col-md-3" >      
            <div class="mb-3">
              <label for="exampleFormControlInput1" class="form-label">Upload</label>
              <input type="file" id="VideoFile" name="VideoFile" class="form-control"  required/>
            </div>
          </div>

      </div>
      <div class="row">
        <!-- Form controls -->
       
            <div class="col-md-3" hidden>    
              <div class="mb-3">
                <label for="exampleFormControlReadOnlyInput1" class="form-label">Light Intensity</label>
                <select class="form-select  LICate" id="basic-default-LICate"  name="LICate" >
                  {% for cate in all_li %}
                    <option selected="" value="{{cate.id}}" data-icon="bx bxl-codepen">{{cate.LItype}}</option>
                  {%endfor%}
                
          
                </select>
              </div>
            </div>
            <div class="col-md-3" hidden>  
              <div class="mb-3">
                <label for="exampleFormControlReadOnlyInputPlain1" class="form-label">Video File Format</label>
                <select class="form-select  VideoFormat" id="basic-default-VideoFormat"  name="VideoFormat" >
                  {% for vff in all_vff %}
                    <option selected="" value="{{vff.id}}" data-icon="bx bxl-codepen">{{vff.vtype}}</option>
                  {%endfor%}
                
          
                </select>
              </div>
            </div>
            <div class="col-md-3" hidden>  
              <div class="mb-3">
                <label for="exampleFormControlReadOnlyInputPlain1" class="form-label">File Name</label>
                <input
                type="text"
                id="FileName"
                name="FileName"
                class="form-control"
                placeholder=""
                value="dehradun"
                required
              />
              </div>
            </div>           
        </div>
        <div class="row">
          <!-- Form controls -->
        
              <div class="col-md-3" hidden>    
                <div class="mb-3">
                  <label for="exampleFormControlReadOnlyInput1" class="form-label">Remarks</label>
                  <input
                  type="text"
                  id="Remarks"
                  name="Remarks"
                  class="form-control"
                  placeholder=""
                  value="test"
                  required
                />
                </div>
              </div>
              <div class="col-md-3">  
                <div class="mb-3">
                  <label for="exampleFormControlReadOnlyInput1" class="form-label">&nbsp;</label>
                  <button type="submit" class="form-control btn btn-primary">Submit</button>
                
                </div>
              </div>
              <div class="col-md-3">  
                <div class="mb-3">
                  <label for="exampleFormControlReadOnlyInput1" class="form-label">&nbsp;</label>
                  <input type="button"  class="form-control btn btn-secondary" value="reset" id="resetBtn" onClick="this.form.reset()" />
                </div>
              </div>           
          </div>
</div>

  </div>
  </div>


<!-- / Content -->



<div class="content-backdrop fade"></div>
</div>
<!-- Content wrapper -->
</form>
</div>  

</div>
<!-- <style>
  .browser-default-validation {
    margin-top: 10px;
    display: flex;
  }
  .CModel {
    margin-left: 20px;
  }
  .CompanyName{
    margin-left: 20px;
  }
  .btn-primary, .btn-secondary {
    display: inline-block;
    vertical-align: middle;
    margin-left: 20px;
    
}
  .ProjectName
  {
    margin-left: 20px;
  }
  .StationName
  {
    margin-left: 20px;
  }
  .LICate
  {
    margin-left: 20px;
  }
  .VideoFormat
  {
    margin-left: 20px;
  }
  .form-control
  {
    margin-left: 20px; 
  }
  
  </style> -->

{%endblock%}
<!-- script tag -->
{% block script %}


<script>

 // basic-default-company
 console.log('$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$')
    //   Select company
 $('#basic-default-company').on('click', function (e) {
 
        var optionSelected = $("option:selected", this);
        var id = this.value;
       
        if (id != ''){
          $.ajax({
            url: "{% url 'get_projects' %}",
            method: 'get',
            data: {
                'id':id,
            },
            dataType: 'json',
            success: function(data){
              console.log(data)
              if(1){
                var txt =  '<select class="form-select" id="basic-default-project" ><option selected="" disabled>...</option>'
           
                  data.data.forEach(function(item){

                  txt += '<option  value='+ item.id +'><a href=1>'+ item.name +'</a></option>'
                });
                
                
                txt += '</select>'
                $('#basic-default-project').html(txt)
               
                // txt += '</div>'
                // $('#list_camera').html(txt)
                
                // $('html,body').animate({scrollTop:distance},500);
              }
            }
          })
  
        }
        
    });

     //   Select project
 $('#basic-default-project').on('change', function (e) {
        
        var optionSelected = $("option:selected", this);
        var id = this.value;
        console.log('$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$', id)
        if (id != ''){
          $.ajax({
            url: "{% url 'get_stations' %}",
            method: 'get',
            data: {
                'id':id,
            },
            dataType: 'json',
            success: function(data){
              if(1){
                var txt =  '<select class="form-select" id="basic-default-location" ><option selected="" disabled>...</option>'
           
                  data.data.forEach(function(item){

                  txt += '<option  value='+ item.id +'><a href=1>'+ item.name +'</a></option>'
                });
                txt += '</select>'
                $('#basic-default-location').html(txt)
               
                // txt += '</div>'
                // $('#list_camera').html(txt)
                
                // $('html,body').animate({scrollTop:distance},500);
              }
            }
          })
  
        }
        
    });
  $('#basic-default-company').on('change', function (e) {
 
    var optionSelected = $("option:selected", this);
    var id = this.value;
    if (id != ''){
          $.ajax({
           
            data: {
                'id':id,
            },
            dataType: 'json',
            success: function(data){
              console.log(data)}
            })
          }

  });

  $('#basic-default-LICate').on('change', function (e) {
 
 var optionSelected = $("option:selected", this);
 var id = this.value;
 if (id != ''){
       $.ajax({
        
         data: {
             'id':id,
         },
         dataType: 'json',
         success: function(data){
           console.log(data)}
         })
       }

});
$('#basic-default-VideoFormat').on('change', function (e) {
 
 var optionSelected = $("option:selected", this);
 var id = this.value;
 if (id != ''){
       $.ajax({
        
         data: {
             'id':id,
         },
         dataType: 'json',
         success: function(data){
           console.log(data)}
         })
       }

});
</script>
{% endblock %}
